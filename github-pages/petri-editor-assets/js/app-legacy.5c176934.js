(function(){"use strict";var t={7937:function(t,e,n){n(6992),n(8674),n(9601),n(7727);var r=n(9963),a=n(8139),o=n(8947),i=n(7810),u=n(1436),s=n(6024),l=n(9669),c=n.n(l),d=n(5382),p=n.n(d),f=n(6252),m={class:"app-container"};function g(t,e,n,r,a,o){var i=(0,f.up)("router-view");return(0,f.wg)(),(0,f.j4)("div",m,[(0,f.Wm)(i)])}var h={name:"App"};h.render=g;var v=h,y=n(4624),b=(n(1249),n(2222),n(8309),n(2119)),w=(0,f.HX)("data-v-fe25df0c");(0,f.dD)("data-v-fe25df0c");var E={class:"error-page"},x=(0,f.Wm)("h1",null,[(0,f.Uk)("500 "),(0,f.Wm)("span",{style:{color:"#F56C6C"}},"Internal Server Error")],-1),S=(0,f.Wm)("h3",null,"Oops... Something went wrong.",-1),k=(0,f.Wm)("p",null,[(0,f.Uk)("Try going back and attempting the action again after some time. "),(0,f.Wm)("br"),(0,f.Uk)("Feel free to contact us if the problem persist.")],-1),I=(0,f.Uk)("Go to home page");(0,f.Cn)();var T=w((function(t,e,n,r,a,o){var i=(0,f.up)("el-divider"),u=(0,f.up)("el-button");return(0,f.wg)(),(0,f.j4)("div",E,[x,S,(0,f.Wm)(i),k,(0,f.Wm)(u,{type:"primary",onClick:o.goToHomePage},{default:w((function(){return[I]})),_:1},8,["onClick"])])})),W={methods:{goToHomePage:function(){this.$router.push("/")}}};W.render=T,W.__scopeId="data-v-fe25df0c";var j=W,_=(0,f.HX)("data-v-e97d3f30"),C=_((function(t,e,n,r,a,o){var i=(0,f.up)("EditorProperties"),u=(0,f.up)("el-aside"),s=(0,f.up)("Workspace"),l=(0,f.up)("el-main"),c=(0,f.up)("el-container"),d=(0,f.Q2)("loading");return(0,f.wy)(((0,f.wg)(),(0,f.j4)(c,{class:"page-container"},{default:_((function(){return[(0,f.Wm)(u,{width:"15%"},{default:_((function(){return[(0,f.Wm)(i)]})),_:1}),(0,f.Wm)(c,null,{default:_((function(){return[(0,f.Wm)(l,null,{default:_((function(){return[(0,f.Wm)(s)]})),_:1})]})),_:1})]})),_:1},512)),[[d,a.loading]])})),V=n(4183),$=n(7171),N=(n(5666),(0,f.HX)("data-v-2a5bc2e4"));(0,f.dD)("data-v-2a5bc2e4");var P={class:"editor-Properties"},O=(0,f.Wm)("h3",null,"Properties",-1);(0,f.Cn)();var R=N((function(t,e,n,r,a,o){var i=(0,f.up)("ExecutionMenu"),u=(0,f.up)("el-collapse-item"),s=(0,f.up)("SelectedElementMenu"),l=(0,f.up)("el-collapse");return(0,f.wg)(),(0,f.j4)("div",P,[O,(0,f.Wm)(l,{modelValue:a.activeItems,"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.activeItems=t})},{default:N((function(){return[(0,f.Wm)(u,{title:"Execution",name:"execution"},{default:N((function(){return[(0,f.Wm)(i)]})),_:1}),(0,f.Wm)(u,{title:"Selected element",name:"selectedElement"},{default:N((function(){return[(0,f.Wm)(s)]})),_:1}),(0,f.Wm)(u,{title:"Storage",name:"storage"})]})),_:1},8,["modelValue"])])})),z={class:"execution-menu"};function F(t,e,n,r,a,o){var i=(0,f.up)("el-input"),u=(0,f.up)("el-form-item"),s=(0,f.up)("el-form");return(0,f.wg)(),(0,f.j4)("div",z,[(0,f.Wm)(s,{"label-width":"30%",size:"mini"},{default:(0,f.w5)((function(){return[(0,f.Wm)(u,{label:"Step"},{default:(0,f.w5)((function(){return[(0,f.Wm)(i,{modelValue:o.step,"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.step=t}),readonly:""},null,8,["modelValue"])]})),_:1}),(0,f.Wm)(u,{label:"Logs"},{default:(0,f.w5)((function(){return[(0,f.Wm)(i,{type:"textarea",modelValue:o.logs,"onUpdate:modelValue":e[2]||(e[2]=function(t){return o.logs=t}),readonly:"",placeholder:"empty",autosize:{minRows:3,maxRows:6},resize:"none"},null,8,["modelValue"])]})),_:1})]})),_:1})])}var A={name:"ExecutionMenu",computed:{step:function(){return this.$store.getters.step},logs:function(){return this.$store.getters.logsString}}};A.render=F;var M=A,D=n(3577),L={class:"selected-element-menu"},U={class:"select-item"},Z={class:"select-item"};function B(t,e,n,r,a,o){var i=(0,f.up)("el-empty"),u=(0,f.up)("el-input"),s=(0,f.up)("el-form-item"),l=(0,f.up)("el-option"),c=(0,f.up)("el-select"),d=(0,f.up)("el-form");return(0,f.wg)(),(0,f.j4)("div",L,[o.selectedElement?"place"===o.selectedElement.type?((0,f.wg)(),(0,f.j4)(d,{key:1,"label-width":"30%",size:"mini"},{default:(0,f.w5)((function(){return[(0,f.Wm)(s,{label:"Label"},{default:(0,f.w5)((function(){return[(0,f.Wm)(u,{modelValue:o.selectedElement.attrs.label,"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.selectedElement.attrs.label=t}),onInput:o.updateLabel},null,8,["modelValue","onInput"])]})),_:1}),(0,f.Wm)(s,{label:"Datatype"},{default:(0,f.w5)((function(){return[(0,f.Wm)(c,{modelValue:o.selectedElement.attrs.dataType,"onUpdate:modelValue":e[2]||(e[2]=function(t){return o.selectedElement.attrs.dataType=t}),filterable:"",onChange:o.updateDataType},{default:(0,f.w5)((function(){return[((0,f.wg)(!0),(0,f.j4)(f.HY,null,(0,f.Ko)(o.dataTypes,(function(t){return(0,f.wg)(),(0,f.j4)(l,{key:t,label:t,value:t},{default:(0,f.w5)((function(){return[(0,f.Wm)("span",U,(0,D.zw)(t),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1}),(0,f.Wm)(s,{label:"Initial state"},{default:(0,f.w5)((function(){return[(0,f.Wm)(u,{type:"textarea",modelValue:o.selectedElement.attrs.initialStateString,"onUpdate:modelValue":e[3]||(e[3]=function(t){return o.selectedElement.attrs.initialStateString=t}),placeholder:"empty",autosize:{minRows:3,maxRows:6},resize:"none",onInput:o.updateInitialStateString},null,8,["modelValue","onInput"])]})),_:1}),(0,f.Wm)(s,{label:"Current state"},{default:(0,f.w5)((function(){return[(0,f.Wm)(u,{type:"textarea",modelValue:o.selectedElement.attrs.currentStateString,"onUpdate:modelValue":e[4]||(e[4]=function(t){return o.selectedElement.attrs.currentStateString=t}),placeholder:"empty",autosize:{minRows:3,maxRows:6},resize:"none",readonly:""},null,8,["modelValue"])]})),_:1}),(0,f.Wm)(s,{label:"Count"},{default:(0,f.w5)((function(){return[(0,f.Wm)(u,{modelValue:o.selectedElement.attrs.count,"onUpdate:modelValue":e[5]||(e[5]=function(t){return o.selectedElement.attrs.count=t}),readonly:""},null,8,["modelValue"])]})),_:1})]})),_:1})):"transition"===o.selectedElement.type?((0,f.wg)(),(0,f.j4)(d,{key:2,"label-width":"30%",size:"mini"},{default:(0,f.w5)((function(){return[(0,f.Wm)(s,{label:"Label"},{default:(0,f.w5)((function(){return[(0,f.Wm)(u,{modelValue:o.selectedElement.attrs.label,"onUpdate:modelValue":e[6]||(e[6]=function(t){return o.selectedElement.attrs.label=t}),onInput:o.updateLabel},null,8,["modelValue","onInput"])]})),_:1}),(0,f.Wm)(s,{label:"Action"},{default:(0,f.w5)((function(){return[(0,f.Wm)(c,{modelValue:o.selectedElement.attrs.action,"onUpdate:modelValue":e[7]||(e[7]=function(t){return o.selectedElement.attrs.action=t}),filterable:"",onChange:o.updateAction},{default:(0,f.w5)((function(){return[((0,f.wg)(!0),(0,f.j4)(f.HY,null,(0,f.Ko)(o.actions,(function(t){return(0,f.wg)(),(0,f.j4)(l,{key:t.name,label:t.name,value:t.name},{default:(0,f.w5)((function(){return[(0,f.Wm)("span",Z,(0,D.zw)(t.name),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])]})),_:1}),(0,f.Wm)(s,{label:"Status"},{default:(0,f.w5)((function(){return[(0,f.Wm)(u,{modelValue:o.selectedElement.attrs.status,"onUpdate:modelValue":e[8]||(e[8]=function(t){return o.selectedElement.attrs.status=t}),readonly:""},null,8,["modelValue"])]})),_:1})]})),_:1})):(0,f.kq)("",!0):((0,f.wg)(),(0,f.j4)(i,{key:0,description:"No element selected"}))])}var X={name:"SelectedElementMenu",data:function(){return{}},computed:{selectedElement:function(){return this.$store.getters.selectedElement},actions:function(){return this.$store.getters.actions},dataTypes:function(){return this.$store.getters.dataTypes}},methods:{updateLabel:function(t){this.$store.commit("updateElementLabel",t)},updateDataType:function(t){this.$store.commit("updateElementDataType",t)},updateInitialStateString:function(t){this.$store.commit("updateElementInitialStateString",t)},updateAction:function(t){this.$store.commit("updateElementAction",t)}}};X.render=B;var H=X,Y={name:"EditorProperties",data:function(){return{activeItems:["execution","selectedElement"]}},components:{ExecutionMenu:M,SelectedElementMenu:H}};Y.render=R,Y.__scopeId="data-v-2a5bc2e4";var G=Y,q=(0,f.HX)("data-v-759a7d58");(0,f.dD)("data-v-759a7d58");var J=(0,f.Wm)("div",{id:"paper"},null,-1),K=(0,f.Uk)("Display");(0,f.Cn)();var Q=q((function(t,e,n,r,a,o){var i=(0,f.up)("ControlBar"),u=(0,f.up)("el-tab-pane"),s=(0,f.up)("el-tabs");return(0,f.wg)(),(0,f.j4)(s,{type:"border-card",class:"el-tabs"},{default:q((function(){return[(0,f.Wm)(u,{label:a.modelName,class:"tab-content"},{default:q((function(){return[(0,f.Wm)(i),J]})),_:1},8,["label"]),(0,f.Wm)(u,{label:"Display"},{default:q((function(){return[K]})),_:1})]})),_:1})})),tt=(0,f.HX)("data-v-bcab461c");(0,f.dD)("data-v-bcab461c");var et={class:"control-bar"},nt=(0,f.Wm)("i",{class:"fas fa-mouse-pointer"},null,-1),rt=(0,f.Wm)("i",{class:"fas fa-circle"},null,-1),at=(0,f.Wm)("i",{class:"fas fa-square"},null,-1),ot=(0,f.Wm)("i",{class:"fas fa-bolt"},null,-1),it=(0,f.Wm)("i",{class:"fas fa-fast-backward"},null,-1),ut=(0,f.Wm)("i",{class:"fas fa-step-forward"},null,-1);(0,f.Cn)();var st=tt((function(t,e,n,r,a,o){var i=(0,f.up)("el-button"),u=(0,f.up)("el-tooltip"),s=(0,f.up)("el-button-group");return(0,f.wg)(),(0,f.j4)("div",et,[(0,f.Wm)(s,{class:"tools"},{default:tt((function(){return[(0,f.Wm)(u,{class:"item",effect:"dark",content:"Cursor tool",placement:"top-start","show-after":2400},{default:tt((function(){return[(0,f.Wm)(i,{type:a.btnType.cursor,size:"mini",onClick:e[1]||(e[1]=function(t){return o.selectTool("cursor")})},{default:tt((function(){return[nt]})),_:1},8,["type"])]})),_:1}),(0,f.Wm)(u,{class:"item",effect:"dark",content:"Place tool",placement:"top-start","show-after":2400},{default:tt((function(){return[(0,f.Wm)(i,{type:a.btnType.place,size:"mini",onClick:e[2]||(e[2]=function(t){return o.selectTool("place")})},{default:tt((function(){return[rt]})),_:1},8,["type"])]})),_:1}),(0,f.Wm)(u,{class:"item",effect:"dark",content:"Transition tool",placement:"top-start","show-after":2400},{default:tt((function(){return[(0,f.Wm)(i,{type:a.btnType.transition,size:"mini",onClick:e[3]||(e[3]=function(t){return o.selectTool("transition")})},{default:tt((function(){return[at]})),_:1},8,["type"])]})),_:1}),(0,f.Wm)(u,{class:"item",effect:"dark",content:"Execute tool",placement:"top-start","show-after":2400},{default:tt((function(){return[(0,f.Wm)(i,{type:a.btnType.execute,size:"mini",onClick:e[4]||(e[4]=function(t){return o.selectTool("execute")})},{default:tt((function(){return[ot]})),_:1},8,["type"])]})),_:1})]})),_:1}),(0,f.Wm)(s,{class:"simulation"},{default:tt((function(){return[(0,f.Wm)(u,{class:"item",effect:"dark",content:"Fast backward",placement:"top-start","show-after":2400},{default:tt((function(){return[(0,f.Wm)(i,{type:"default",size:"mini",onClick:e[5]||(e[5]=function(t){return o.fastBackward()})},{default:tt((function(){return[it]})),_:1})]})),_:1}),(0,f.Wm)(u,{class:"item",effect:"dark",content:"Step forward",placement:"top-start","show-after":2400},{default:tt((function(){return[(0,f.Wm)(i,{type:"default",size:"mini",onClick:e[6]||(e[6]=function(t){return o.stepForward()})},{default:tt((function(){return[ut]})),_:1})]})),_:1})]})),_:1})])})),lt={name:"ControlBar",data:function(){return{btnType:{cursor:"primary",place:"default",transition:"default",execute:"default"}}},computed:{tool:function(){return this.$store.getters.tool}},methods:{selectTool:function(t){this.btnType[this.tool]="default",this.$store.commit("selectTool",t),this.btnType[this.tool]="primary"},fastBackward:function(){this.$store.commit("resetState")},stepForward:function(){this.$store.commit("stepForward")}}};lt.render=st,lt.__scopeId="data-v-bcab461c";var ct=lt,dt={name:"Workspace",data:function(){return{modelName:"MyTestModel"}},components:{ControlBar:ct}};dt.render=Q,dt.__scopeId="data-v-759a7d58";var pt,ft,mt=dt,gt=!1,ht="#67C23A",vt="http://vps-d38373e3.vps.ovh.net:5000",yt={attrs:{body:{strokeWidth:2,cx:0,cy:0,rx:40,ry:40,stroke:"#8f8f8f",fill:"#FFFFFF"},label:{ref:"body",textVerticalAnchor:"bottom",textAnchor:"middle",refX:"50%",refY:"0%",fontSize:12,fill:"#6d6d6d",text:"New Place"},dataType:{ref:"body",textVerticalAnchor:"top",textAnchor:"left",refX:"90%",refY:"90%",fontSize:12,fill:"#6d6d6d",text:"integer"},initialState:{ref:"body",textVerticalAnchor:"top",textAnchor:"left",refX:"105%",refY:"5%",fontSize:12,fill:ht,text:"[]"},count:{ref:"body",textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:12,fill:"#6d6d6d",text:"0"}}},bt={markup:[{tagName:"ellipse",selector:"body",attributes:{magnet:"on-ctrl"}},{tagName:"text",selector:"label"},{tagName:"text",selector:"dataType"},{tagName:"text",selector:"initialState"},{tagName:"text",selector:"count"}]},wt={ports:{groups:{input:{attrs:{circle:{fill:"#409EFF",stroke:"none",r:5,magnet:"passive","data-name":"","data-type":""},text:{fontSize:12,fill:"#6d6d6d"}},label:{position:"insideOriented"},position:{name:"line",args:{start:{x:-120,y:-40},end:{x:-120,y:40}}}},output:{attrs:{circle:{fill:"#67C23A",stroke:"none",r:5,magnet:"on-ctrl","data-name":"","data-type":""},text:{fontSize:12,fill:"#6d6d6d"}},label:{position:"insideOriented"},position:{name:"line",args:{start:{x:120,y:-40},end:{x:120,y:40}}}}}},attrs:{".":{magnet:!1},body:{refx:"100%",refy:"100%",strokeWidth:2,x:-120,y:-40,width:240,height:80,rx:4,ry:4,stroke:"#8f8f8f",fill:"#FFFFFF"},label:{ref:"body",textVerticalAnchor:"bottom",textAnchor:"middle",refX:"50%",refY:"0%",fontSize:12,fill:"#6d6d6d",text:"New Transition"},action:{ref:"body",textVerticalAnchor:"middle",textAnchor:"middle",refX:"105%",refY:"110%",fontSize:12,fill:"#6d6d6d",text:""}}},Et={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"},{tagName:"text",selector:"action"}]},xt={components:{EditorProperties:G,Workspace:mt},data:function(){return{loading:!0}},computed:{tool:function(){return this.$store.getters.tool},selectedElement:function(){return this.$store.getters.selectedElement},step:function(){return this.$store.getters.step},actions:function(){return this.$store.getters.actions},dataTypes:function(){return this.$store.getters.dataTypes},graph:{get:function(){return this.$store.getters.graph},set:function(t){this.$store.commit("setGraph",t)}},paperEl:{get:function(){return this.$store.getters.paperEl},set:function(t){this.$store.commit("setPaperEl",t)}},paper:{get:function(){return this.$store.getters.paper},set:function(t){this.$store.commit("setPaper",t)}}},methods:{drag:function(t,e){if("cursor"===this.tool&&gt){var n=t-ft,r=e-pt;this.paper.setOrigin(this.paper.options.origin.x+n,this.paper.options.origin.y+r),window.$("body").css("cursor","grabbing")}},startDrag:function(t,e){"cursor"===this.tool&&(this.paper.setInteractivity({elementMove:!1}),ft=t,pt=e,gt=!0)},stopDrag:function(){this.paper.setInteractivity({elementMove:!0}),gt=!1,window.$("body").css("cursor","auto")},setUpPaper:function(){var t=this;window.joint.dia.Element.define("psim.Place",yt,bt),window.joint.dia.Element.define("psim.Transition",wt,Et),this.graph=new window.joint.dia.Graph,this.paperEl=window.$("#paper"),this.paper=new window.joint.dia.Paper({el:this.paperEl,model:this.graph,width:this.paperEl.width(),height:this.paperEl.height(),gridSize:10,drawGrid:!0,linkPinning:!1,defaultLink:function(){return new window.joint.shapes.standard.Link({router:{name:"orthogonal",args:{step:10,perpendicular:!0}}})},validateMagnet:function(t,e,n){return"on-ctrl"===e.getAttribute("magnet")&&n.ctrlKey},validateConnection:function(e,n,r,a,o,i){if(e.model.attributes.type===r.model.attributes.type)return!1;if(!r||!a)return!1;if("output"===a.getAttribute("port-group"))return!1;if("psim.Place"===e.model.attributes.type&&e.model.attributes.attrs.dataType.text!==a.attributes["data-type"].nodeValue)return!1;if("psim.Transition"===e.model.attributes.type&&r.model.attributes.attrs.dataType.text!==n.attributes["data-type"].nodeValue)return!1;if("psim.Transition"===r.model.attributes.type){var u=t.graph.getLinks().some((function(t){return t.id!==i.model.id&&t.get("target").id===r.model.id&&t.get("target").port===a.getAttribute("port")}));if(u)return!1}return!0}}),this.paper.on({"element:mouseenter":function(e){"psim.Place"!==e.model.attributes.type?"psim.Transition"===e.model.attributes.type&&e.addTools(new window.joint.dia.ToolsView({tools:[new window.joint.elementTools.Remove({useModelGeometry:!0,x:"0%",y:"0%",action:function(e,n,r){t.$store.commit("removeTransition",n.model.id),n.model.remove({ui:!0,tool:r.cid})},offset:{x:120,y:-40}})]})):e.addTools(new window.joint.dia.ToolsView({tools:[new window.joint.elementTools.Remove({useModelGeometry:!0,x:"50%",y:"50%",action:function(e,n,r){t.$store.commit("removePlace",n.model.id),n.model.remove({ui:!0,tool:r.cid})},offset:{x:-30,y:30}})]}))},"link:connect":function(e,n,r,a){var o=r.model.attributes.type;if("psim.Transition"===o)t.$store.commit("addInputLink",{placeId:e.model.get("source").id,transitionId:e.model.get("target").id,portName:a.attributes["data-name"].nodeValue});else if("psim.Place"===o){var i=t.graph.getCell(e.model.get("source").id).getPort(e.model.get("source").port);t.$store.commit("addOutputLink",{placeId:r.model.attributes.id,transitionId:e.model.get("source").id,portName:i.attrs.circle["data-name"]})}},"link:mouseenter":function(e){e.addTools(new window.joint.dia.ToolsView({tools:[new window.joint.linkTools.Vertices({snapRadius:0}),new window.joint.linkTools.Remove({distance:20,action:function(e,n,r){var a=n.model.get("source"),o=n.model.get("target"),i={};if("body"===a.magnet){var u=t.graph.getCell(o.id).getPort(o.port);i={placeId:a.id,transitionId:o.id,portName:u.attrs.circle["data-name"]},t.$store.commit("removeInputLink",i)}else if("circle"===a.magnet){var s=t.graph.getCell(a.id).getPort(a.port);i={placeId:o.id,transitionId:a.id,portName:s.attrs.circle["data-name"]},t.$store.commit("removeOutputLink",i)}n.model.remove({ui:!0,tool:r.cid})}})]}))},"cell:mouseleave":function(t){t.removeTools()},"cell:pointerclick":function(){var e=(0,$.Z)(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("cursor"!==t.tool){e.next=6;break}return t.selectedElement&&(r=t.$store.getters.getCellViewById(t.selectedElement.id),r.unhighlight()),a=t.$store.getters.getElementById(n.model.id),t.$store.commit("selectElement",a),n.highlight(),e.abrupt("return");case 6:if("execute"!==t.tool){e.next=9;break}return e.next=9,t.$store.commit("fireTransition",n.model.attributes.id);case 9:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}(),"blank:pointerclick":function(e,n,r){if("transition"!==t.tool)if("place"!==t.tool){if("cursor"===t.tool&&t.selectedElement){var a=t.$store.getters.getCellViewById(t.selectedElement.id);a.unhighlight(),t.$store.commit("selectElement",void 0)}}else{var o=new window.joint.shapes.psim.Place;o.position(n,r),o.addTo(t.graph);var i={id:o.id,type:"place",attrs:{label:"New Place",dataType:"integer",initialState:[],initialStateString:"",currentState:[],currentStateString:"",inputs:[],outputs:[],count:0}};t.$store.commit("addElement",i)}else{var u=new window.joint.shapes.psim.Transition;u.position(n,r),u.addTo(t.graph);var s={id:u.id,type:"transition",attrs:{label:"New Transition",action:"",inputs:{},outputs:{},status:"Enabled"}};t.$store.commit("addElement",s)}},"blank:pointerdown":function(e,n,r){t.startDrag(n,r)},"cell:pointermove":function(e,n,r){t.drag(n,r)},"blank:pointermove":function(e,n,r){t.drag(n,r)},"cell:pointerup":function(){t.stopDrag()},"blank:pointerup":function(){t.stopDrag()},"paper:mouseleave":function(){t.stopDrag()}})}},mounted:function(){var t=this;return(0,$.Z)(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$loadScript("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js");case 3:return e.next=5,t.$loadScript("https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.js");case 5:return e.next=7,t.$loadScript("https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.0/backbone.js");case 7:return e.next=9,t.$loadScript("https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.3.1/joint.js");case 9:return e.next=11,t.axios.get("".concat(vt,"/actions"));case 11:return a=e.sent,(n=t.actions).push.apply(n,(0,V.Z)(a.data)),e.next=15,t.axios.get("".concat(vt,"/types"));case 15:o=e.sent,(r=t.dataTypes).push.apply(r,(0,V.Z)(o.data)),t.setUpPaper(),e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](0),console.log(e.t0),t.$alert("Failed to load 3rd party libraries","Error",{confirmButtonText:"OK",type:"error",callback:function(){t.$router.push("500")}});case 24:return e.prev=24,t.loading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,20,24,27]])})))()}};xt.render=C,xt.__scopeId="data-v-e97d3f30";var St=xt,kt=[{path:"/",name:"Editor",component:St},{path:"/500",name:"InternalServerError",component:j}],It=function(t,e){return t.map((function(t){return(0,y.Z)((0,y.Z)({},t),{},{path:"/".concat(e).concat(t.path),name:"".concat(e,"-").concat(t.name)})}))};console.log(kt.concat(It(kt,"editor")));var Tt=(0,b.p7)({history:(0,b.PO)(),routes:kt.concat(It(kt,"editor"))}),Wt=Tt,jt=(n(7042),n(4747),n(1539),n(8783),n(3948),n(9714),n(2479),n(7941),n(9826),n(3112),n(7327),n(4553),n(561),n(4709)),_t=n(1173),Ct="http://localhost:5000",Vt="#67C23A",$t="#F56C6C",Nt={Enabled:"#8f8f8f",Disabled:$t,Ready:Vt},Pt=function(t){if(t.length>8){for(var e="",n=0;n<t.length;n+=8){if(n>16){e+="...";break}n+8<t.length?e+="".concat(t.slice(n,n+8),"\n "):e+="".concat(t.slice(n,n+8))}return e}return t},Ot=function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],e.forEach((function(t){var e=c()({method:"POST",url:"".concat(Ct,"/types/check"),data:{type:n,value:t},headers:{"Content-Type":"application/json"}});r.push(e)})),t.prev=2,t.next=5,Promise.all(r);case 5:return a=t.sent,t.abrupt("return",a.every((function(t){return t.data.valid})));case 9:return t.prev=9,t.t0=t["catch"](2),t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,n){return t.apply(this,arguments)}}(),Rt=function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e,n,r,a){var o,i,u,s,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=!1,u=e,t.prev=2,o=JSON.parse("[".concat(n,"]")),t.next=6,Ot(o,r);case 6:if(i=t.sent,i){t.next=9;break}throw new Error("Error validating initial state");case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),o=[];case 14:return t.prev=14,u.attrs.initialState=o,s=a.graph.getCell(u.id),l=Pt(n),s.attr({initialState:{fill:i?Vt:$t,text:"[".concat(l,"]")}}),0===a.step&&(c=o?o.length:0,u.attrs.count=c,u.attrs.currentState=u.attrs.initialState,u.attrs.currentStateString=o&&o.length?u.attrs.initialStateString:"",s.attr({count:{text:c.toString()}})),t.finish(14);case 21:case"end":return t.stop()}}),t,null,[[2,11,14,21]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),zt=function(t,e){var n=Object.values(e.attrs.inputs),r=n.every((function(t){return!!t}));if(!r)return"Disabled";var a={};n.forEach((function(t){a[t]=(a[t]||0)+1}));var o=Object.keys(a),i=o.every((function(e){var n=t.elements.find((function(t){return e===t.id}));return n.attrs.count>=a[e]}));return i?"Ready":"Enabled"},Ft=function(t,e){var n=t.elements.find((function(t){return e===t.id}));n.attrs.status=zt(t,n);var r=t.graph.getCell(e);r.attr({body:{stroke:Nt[n.attrs.status]}})},At=function(t,e,n){var r=new Date,a="".concat((r.getMonth()+1).toString().padStart(2,"0"),"/").concat(r.getDate().toString().padStart(2,"0"),"/").concat(r.getFullYear().toString().padStart(4,"0")," ").concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0"));t.logs.push("[".concat(a,"] ").concat(e)),"success"===n?(0,_t.bM)({title:"Success",message:e,type:"success"}):"error"===n?_t.bM.error({title:"Error",message:e}):"info"===n&&_t.bM.info({title:"Info",message:e})},Mt=function(t,e){var n=t.elements.find((function(t){return e===t.id}));n.attrs.outputs.forEach((function(e){var n=t.elements.find((function(t){return e.transitionId===t.id}));n.attrs.inputs[e.portName]=void 0,Ft(t,e.transitionId)})),n.attrs.inputs.forEach((function(e){var n=t.elements.find((function(t){return e.transitionId===t.id}));n.attrs.outputs[e.portName]=n.attrs.output[e.portName].filter((function(t){return t!==e.transitionId}))})),t.graph.removeLinks(t.graph.getCell(e))},Dt=function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e,n){var r,a,o,i,u,s,l,d,p,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.elements.find((function(t){return n===t.id})),a=zt(e,r),o={},"Ready"!==a){t.next=29;break}if(t.prev=4,i=r.attrs.action,i){t.next=8;break}return t.abrupt("return");case 8:return u=Object.keys(r.attrs.inputs),u.forEach((function(t){var n=e.elements.find((function(e){return e.id===r.attrs.inputs[t]}));o[t]=n.attrs.currentState.pop(),n.attrs.count-=1;var a=JSON.stringify(n.attrs.currentState);n.attrs.currentStateString=a.slice(1,-1);var i=e.graph.getCell(n.id);i.attr({count:{text:n.attrs.count.toString()}})})),t.next=12,c()({method:"POST",url:"".concat(Ct,"/actions/").concat(i,"/execute"),data:o,headers:{"Content-Type":"application/json"}});case 12:return s=t.sent,u.forEach((function(t){var n=e.elements.find((function(e){return e.id===r.attrs.inputs[t]}));n.attrs.outputs.forEach((function(t){Ft(e,t.transitionId)}))})),l=Object.keys(r.attrs.outputs),l.forEach((function(t){r.attrs.outputs[t].forEach((function(n){var r=e.elements.find((function(t){return t.id===n}));r.attrs.count+=1,r.attrs.currentState.push(s.data[t]);var a=JSON.stringify(r.attrs.currentState);r.attrs.currentStateString=a.slice(1,-1);var o=e.graph.getCell(r.id);o.attr({count:{text:r.attrs.count.toString()}}),r.attrs.outputs.forEach((function(t){Ft(e,t.transitionId)}))}))})),e.step+=1,d='Transition "'.concat(r.attrs.label,'" fired successfully'),At(e,d,"success"),t.abrupt("return");case 22:t.prev=22,t.t0=t["catch"](4),console.log(t.t0),p='Failed to fire transition "'.concat(r.attrs.label,'"'),At(e,p,"error"),f=Object.keys(o),f.forEach((function(t){var n=r.attrs.inputs[t],a=e.elements.find((function(t){return t.id===n}));a.attrs.currentState.push(o[t]),a.attrs.count+=1;var i=JSON.stringify(a.attrs.currentState);a.attrs.currentStateString=i.slice(1,-1);var u=e.graph.getCell(a.id);u.attr({count:{text:a.attrs.count.toString()}})}));case 29:case"end":return t.stop()}}),t,null,[[4,22]])})));return function(e,n){return t.apply(this,arguments)}}(),Lt=(0,jt.MT)({state:{tool:"cursor",selectedElement:void 0,elements:[],step:0,actions:[],dataTypes:[],graph:void 0,paperEl:void 0,paper:void 0,logs:[]},mutations:{removePlace:function(t,e){var n=t.elements.find((function(t){return t.id===e}));t.selectedElement&&n.id===t.selectedElement.id&&(t.selectedElement=void 0),n.attrs.outputs.forEach((function(e){var n=t.elements.find((function(t){return t.id===e.transitionId}));n.attrs.inputs[e.portName]=void 0,Ft(t,n.id)})),n.attrs.inputs.forEach((function(n){var r=t.elements.find((function(t){return t.id===n.transitionId})),a=r.attrs.outputs[n.portName].findIndex((function(t){return t===e}));r.attrs.outputs[n.portName].splice(a,1)}));var r=t.elements.findIndex((function(t){return t.id===e}));t.elements.splice(r,1)},removeTransition:function(t,e){var n=t.elements.find((function(t){return t.id===e}));t.selectedElement&&n.id===t.selectedElement.id&&(t.selectedElement=void 0);var r=Object.values(n.attrs.inputs);r.forEach((function(n){if(n){var r=t.elements.find((function(t){return t.id===n}));r.attrs.outputs=r.attrs.outputs.filter((function(t){return t.transitionId!==e}))}}));var a=Object.values(n.attrs.outputs);a.forEach((function(n){n.forEach((function(n){if(n){var r=t.elements.find((function(t){return t.id===n}));r.attrs.inputs=r.attrs.inputs.filter((function(t){return t.transitionId!==e}))}}))}));var o=t.elements.findIndex((function(t){return t.id===e}));t.elements.splice(o,1)},removeInputLink:function(t,e){var n=t.elements.find((function(t){return t.id===e.placeId})),r=n.attrs.outputs.findIndex((function(t){return t.transitionId===e.transitionId&&t.portName===e.portName}));n.attrs.outputs.splice(r,1);var a=t.elements.find((function(t){return t.id===e.transitionId}));a.attrs.inputs[e.portName]=void 0,Ft(t,e.transitionId)},removeOutputLink:function(t,e){var n=t.elements.find((function(t){return t.id===e.placeId})),r=n.attrs.inputs.findIndex((function(t){return t.transitionId===e.transitionId&&t.portName===e.portName}));n.attrs.inputs.splice(r,1);var a=t.elements.find((function(t){return t.id===e.transitionId})),o=a.attrs.outputs[e.portName].findIndex((function(t){return t===e.placeId}));a.attrs.outputs[e.portName].splice(o,1)},stepForward:function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.elements.filter((function(t){return"transition"===t.type&&"Ready"===t.attrs.status})),r=n.length,0!==r){t.next=5;break}return At(e,"No transition ready","info"),t.abrupt("return");case 5:return a=Math.floor(Math.random()*r),t.next=8,Dt(e,n[a].id);case 8:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),resetState:function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.step=0,n=e.elements.filter((function(t){return"place"===t.type})),r=[],n.forEach((function(t){r.push(Rt(t,t.attrs.initialStateString,t.attrs.dataType,e))})),t.next=6,Promise.all(r);case 6:a=e.elements.filter((function(t){return"transition"===t.type})),a.forEach((function(t){Ft(e,t.id)})),At(e,"Model state reseted","info");case 9:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),fireTransition:function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Dt(e,n);case 1:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),addInputLink:function(t,e){var n=t.elements.find((function(t){return e.placeId===t.id})),r=t.elements.find((function(t){return e.transitionId===t.id}));r.attrs.inputs[e.portName]=e.placeId,n.attrs.outputs.push({transitionId:e.transitionId,portName:e.portName}),Ft(t,e.transitionId)},addOutputLink:function(t,e){var n=t.elements.find((function(t){return e.placeId===t.id})),r=t.elements.find((function(t){return e.transitionId===t.id}));r.attrs.outputs[e.portName].push(e.placeId),n.attrs.inputs.push({transitionId:e.transitionId,portName:e.portName})},selectTool:function(t,e){t.tool=e},addElement:function(t,e){t.elements.push(e)},selectElement:function(t,e){t.selectedElement=e},setGraph:function(t,e){t.graph=e},setPaper:function(t,e){t.paper=e},setPaperEl:function(t,e){t.paperEl=e},updateElementLabel:function(t,e){var n=t.graph.getCell(t.selectedElement.id);n.attr({label:{text:e}})},updateElementDataType:function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.graph.getCell(e.selectedElement.id),r.attr({dataType:{text:n}}),t.next=4,Rt(e.selectedElement,e.selectedElement.attrs.initialStateString,n,e);case 4:e.step>0&&(e.selectedElement.attrs.count=0,r.attr({count:{text:"0"}}),e.selectedElement.attrs.currentStateString="",e.selectedElement.attrs.currentState=[]),Mt(e,e.selectedElement.id);case 6:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),updateElementInitialStateString:function(){var t=(0,$.Z)(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Rt(e.selectedElement,n,e.selectedElement.attrs.dataType,e);case 2:e.selectedElement.attrs.outputs.forEach((function(t){Ft(e,t.transitionId)}));case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),updateElementAction:function(t,e){var n=t.actions.find((function(t){return t.name===e})),r=Object.values(t.selectedElement.attrs.inputs);r.forEach((function(e){if(e){var n=t.elements.find((function(t){return t.id===e}));n.attrs.outputs=n.attrs.outputs.filter((function(e){return e.transitionId!==t.selectedElement.id}))}}));var a=Object.values(t.selectedElement.attrs.outputs);a.forEach((function(e){e.forEach((function(e){var n=t.elements.find((function(t){return t.id===e}));n.attrs.inputs=n.attrs.inputs.filter((function(e){return e.transitionId!==t.selectedElement.id}))}))}));var o=t.graph.getCell(t.selectedElement.id);t.selectedElement.attrs.action=n.name,t.selectedElement.attrs.inputs={},t.selectedElement.attrs.outputs={},o.attr({action:{text:n.name}}),o.removePorts(o.getPorts());var i=Object.keys(n.inputs);i.forEach((function(e){o.addPort({group:"input",attrs:{circle:{"data-name":e,"data-type":n.inputs[e]},text:{text:"".concat(e,":").concat(n.inputs[e])}}}),t.selectedElement.attrs.inputs[e]=void 0}));var u=Object.keys(n.outputs);u.forEach((function(e){o.addPort({group:"output",attrs:{circle:{"data-name":e,"data-type":n.outputs[e]},text:{text:"".concat(e,":").concat(n.outputs[e])}}}),t.selectedElement.attrs.outputs[e]=[]})),t.selectedElement.attrs.status=zt(t,t.selectedElement),"Disabled"===t.selectedElement.attrs.status?o.attr({body:{stroke:$t}}):"Enabled"===t.selectedElement.attrs.status?o.attr({body:{stroke:"#8f8f8f"}}):"Ready"===t.selectedElement.attrs.status&&o.attr({body:{stroke:Vt}})}},getters:{paper:function(t){return t.paper},graph:function(t){return t.graph},paperEl:function(t){return t.paperEl},actions:function(t){return t.actions},dataTypes:function(t){return t.dataTypes},getElementById:function(t){return function(e){return t.elements.find((function(t){return e===t.id}))}},getCellById:function(t){return function(e){return t.graph.getCell(e)}},getCellViewById:function(t){return function(e){return t.paper.findViewByModel(t.graph.getCell(e))}},selectedElement:function(t){return t.selectedElement},tool:function(t){return t.tool},step:function(t){return t.step},logsString:function(t){return t.logs.toString()}},actions:{},modules:{}}),Ut=function(t){t.use(_t.ZP)},Zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.domNode;o.vI.add(u.mRB),o.vI.add(s.NC),o.vz.watch();var n=(0,r.ri)(v);Ut(n),n.component("font-awesome-icon",i.GN),n.use(a.Z),n.use(p(),c()),n.use(Lt).use(Wt).mount(e||"#app")};Zt()}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,o){if(!r){var i=1/0;for(c=0;c<t.length;c++){r=t[c][0],a=t[c][1],o=t[c][2];for(var u=!0,s=0;s<r.length;s++)(!1&o||i>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[s])}))?r.splice(s--,1):(u=!1,o<i&&(i=o));if(u){t.splice(c--,1);var l=a();void 0!==l&&(e=l)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[r,a,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,o,i=r[0],u=r[1],s=r[2],l=0;for(a in u)n.o(u,a)&&(n.m[a]=u[a]);if(s)var c=s(n);for(e&&e(r);l<i.length;l++)o=i[l],n.o(t,o)&&t[o]&&t[o][0](),t[i[l]]=0;return n.O(c)},r=self["webpackChunkpontosim"]=self["webpackChunkpontosim"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(7937)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.5c176934.js.map